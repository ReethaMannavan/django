{% extends "base.html" %}
{% block title %}My Mock Interviews{% endblock %}

{% block content %}
<div class="container py-4">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold m-0">Mock Interview History</h2>

    <a href="{% url 'schedule-mock' %}" class="btn btn-primary btn-sm">
      Schedule New Interview
    </a>
  </div>

  {% for i in interviews %}
  <div class="card shadow-sm mb-3 interview-card">
    <div class="card-body">

      <div class="d-flex justify-content-between align-items-start">
        <div>
          <h5 class="fw-bold mb-1">
            {{ i.get_interview_type_display }} Interview
          </h5>

          <div class="text-muted small mb-2">
            Target Role: <strong>{{ i.target_role }}</strong>
          </div>

          <div class="text-muted small">
            Requested: {{ i.created_at|date:"M d, Y" }}
            {% if i.scheduled_at %}
              â€¢ Scheduled: {{ i.scheduled_at|date:"M d, Y H:i" }}
            {% endif %}
          </div>
        </div>

        <span class="badge px-3 py-2
          {% if i.status == 'scheduled' %}bg-primary
          {% elif i.status == 'completed' %}bg-success
          {% elif i.status == 'cancelled' %}bg-danger
          {% else %}bg-secondary{% endif %}">
          {{ i.status|capfirst }}
        </span>
      </div>

      {% if i.meeting_link %}
      <div class="mt-3">
        <a href="{{ i.meeting_link }}" target="_blank"
           class="btn btn-outline-primary btn-sm">
          Join Meeting
        </a>
      </div>
      {% endif %}

      {% if i.feedback %}
      <div class="feedback-box mt-3 p-3 rounded">
        <div class="fw-semibold mb-1">Consultant Feedback</div>
        <div class="text-muted" style="white-space:pre-wrap;">
          {{ i.feedback }}
        </div>
      </div>
      {% endif %}

    </div>
  </div>
  {% empty %}
  <div class="card shadow-sm">
    <div class="card-body text-center py-4">
      <p class="text-muted mb-2">No mock interviews scheduled yet.</p>
      <a href="{% url 'schedule-mock' %}" class="btn btn-primary btn-sm">
        Schedule Your First Interview
      </a>
    </div>
  </div>
  {% endfor %}

</div>

<style>
.interview-card{
  border-radius:14px;
  border:1px solid #eee;
}

.interview-card:hover{
  box-shadow:0 10px 25px rgba(124,58,237,0.15);
}

.feedback-box{
  background:#faf5ff;
  border:1px solid rgba(124,58,237,0.2);
}
</style>

{% endblock %}
